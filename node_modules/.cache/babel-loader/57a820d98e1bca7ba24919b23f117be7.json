{"ast":null,"code":"var _jsxFileName = \"C:\\\\Code\\\\ecom\\\\eCommerce_Reactjs\\\\src\\\\container\\\\User\\\\StoreVoucher.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport VoucherItem from '../Voucher/VoucherItem';\nimport logoVoucher from '../../../src/resources/img/logoVoucher.png';\nimport { BrowserRouter as Router, Switch, Route, Link, Redirect } from \"react-router-dom\";\nimport './StoreVoucher.scss';\nimport VoucherItemSmall from './VoucherItemSmall';\nimport { getAllVoucherByUserIdService } from '../../services/userService';\nimport moment, { now } from 'moment';\nimport { toast } from 'react-toastify';\nimport { PAGINATION } from '../../utils/constant';\nimport CommonUtils from '../../utils/CommonUtils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction StoreVoucher(props) {\n  _s();\n  const [inputValues, setInputValues] = useState({\n    codeVoucher: '',\n    activeBtn: false\n  });\n  const [dataVoucher, setdataVoucher] = useState([]);\n  const [count, setCount] = useState('');\n  const [numberPage, setnumberPage] = useState('');\n  function compareDates(d1, d2) {\n    var parts = d1.split('/');\n    var d1 = Number(parts[2] + parts[1] + parts[0]);\n    parts = d2.split('/');\n    var d2 = Number(parts[2] + parts[1] + parts[0]);\n    if (d1 <= d2) return true;\n    if (d1 >= d2) return false;\n  }\n  useEffect(() => {\n    let id = props.id;\n    if (id) {\n      let fetchData = async () => {\n        let arrData = await getAllVoucherByUserIdService({\n          limit: PAGINATION.pagerow,\n          offset: 0,\n          id: props.id\n        });\n        let arrTemp = [];\n        if (arrData && arrData.errCode === 0) {\n          let nowDate = moment.unix(Date.now() / 1000).format('DD/MM/YYYY');\n          for (let i = 0; i < arrData.data.length; i++) {\n            let fromDate = moment.unix(arrData.data[i].voucherData.fromDate / 1000).format('DD/MM/YYYY');\n            let toDate = moment.unix(arrData.data[i].voucherData.toDate / 1000).format('DD/MM/YYYY');\n            let amount = arrData.data[i].voucherData.amount;\n            let usedAmount = arrData.data[i].voucherData.usedAmount;\n            if (amount !== usedAmount && compareDates(toDate, nowDate) === false && compareDates(fromDate, nowDate) === true) {\n              arrTemp[i] = arrData.data[i];\n            }\n          }\n          setdataVoucher(arrTemp);\n          setCount(Math.ceil(arrData.count / PAGINATION.pagerow));\n        }\n      };\n      fetchData();\n    }\n  }, [props.id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container rounded bg-white mt-5 mb-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-12 border-right border-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"box-heading\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"content-left\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"V\\xED voucher\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container-voucher\",\n          children: dataVoucher && dataVoucher.length > 0 && dataVoucher.map((item, index) => {\n            let percent = \"\";\n            if (item.voucherData.typeVoucherOfVoucherData.typeVoucher === \"percent\") {\n              percent = item.voucherData.typeVoucherOfVoucherData.value + \"%\";\n            }\n            if (item.voucherData.typeVoucherOfVoucherData.typeVoucher === \"money\") {\n              percent = CommonUtils.formatter.format(item.voucherData.typeVoucherOfVoucherData.value);\n            }\n            let MaxValue = CommonUtils.formatter.format(item.voucherData.typeVoucherOfVoucherData.maxValue);\n            return /*#__PURE__*/_jsxDEV(VoucherItemSmall, {\n              id: item.id,\n              name: item.voucherData.codeVoucher,\n              widthPercent: item.voucherData.usedAmount * 100 / item.voucherData.amount,\n              maxValue: MaxValue,\n              usedAmount: Math.round(item.voucherData.usedAmount * 100 / item.voucherData.amount * 10) / 10,\n              typeVoucher: percent\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 37\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n}\n_s(StoreVoucher, \"mGrEWlMF3PSOuNHkizEmlbmVue4=\");\n_c = StoreVoucher;\nexport default StoreVoucher;\nvar _c;\n$RefreshReg$(_c, \"StoreVoucher\");","map":{"version":3,"names":["React","useState","useEffect","VoucherItem","logoVoucher","BrowserRouter","Router","Switch","Route","Link","Redirect","VoucherItemSmall","getAllVoucherByUserIdService","moment","now","toast","PAGINATION","CommonUtils","jsxDEV","_jsxDEV","StoreVoucher","props","_s","inputValues","setInputValues","codeVoucher","activeBtn","dataVoucher","setdataVoucher","count","setCount","numberPage","setnumberPage","compareDates","d1","d2","parts","split","Number","id","fetchData","arrData","limit","pagerow","offset","arrTemp","errCode","nowDate","unix","Date","format","i","data","length","fromDate","voucherData","toDate","amount","usedAmount","Math","ceil","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","item","index","percent","typeVoucherOfVoucherData","typeVoucher","value","formatter","MaxValue","maxValue","name","widthPercent","round","_c","$RefreshReg$"],"sources":["C:/Code/ecom/eCommerce_Reactjs/src/container/User/StoreVoucher.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport VoucherItem from '../Voucher/VoucherItem';\r\nimport logoVoucher from '../../../src/resources/img/logoVoucher.png'\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    Redirect\r\n} from \"react-router-dom\";\r\nimport './StoreVoucher.scss';\r\nimport VoucherItemSmall from './VoucherItemSmall';\r\nimport { getAllVoucherByUserIdService } from '../../services/userService';\r\nimport moment, { now } from 'moment';\r\nimport { toast } from 'react-toastify';\r\nimport { PAGINATION } from '../../utils/constant';\r\nimport CommonUtils from '../../utils/CommonUtils';\r\nfunction StoreVoucher(props) {\r\n    const [inputValues, setInputValues] = useState({\r\n        codeVoucher: '', activeBtn: false\r\n    });\r\n    const [dataVoucher, setdataVoucher] = useState([])\r\n    const [count, setCount] = useState('')\r\n    const [numberPage, setnumberPage] = useState('')\r\n    function compareDates(d1, d2) {\r\n        var parts = d1.split('/');\r\n        var d1 = Number(parts[2] + parts[1] + parts[0]);\r\n        parts = d2.split('/');\r\n        var d2 = Number(parts[2] + parts[1] + parts[0]);\r\n        if (d1 <= d2) return true\r\n        if (d1 >= d2) return false\r\n\r\n    }\r\n    useEffect(() => {\r\n        let id = props.id\r\n        if (id) {\r\n            let fetchData = async () => {\r\n                let arrData = await getAllVoucherByUserIdService({\r\n\r\n                    limit: PAGINATION.pagerow,\r\n                    offset: 0,\r\n                    id: props.id\r\n                })\r\n                let arrTemp = []\r\n                if (arrData && arrData.errCode === 0) {\r\n                    let nowDate = moment.unix(Date.now() / 1000).format('DD/MM/YYYY')\r\n\r\n                    for (let i = 0; i < arrData.data.length; i++) {\r\n                        let fromDate = moment.unix(arrData.data[i].voucherData.fromDate / 1000).format('DD/MM/YYYY')\r\n                        let toDate = moment.unix(arrData.data[i].voucherData.toDate / 1000).format('DD/MM/YYYY')\r\n                        let amount = arrData.data[i].voucherData.amount\r\n                        let usedAmount = arrData.data[i].voucherData.usedAmount\r\n                        if (amount !== usedAmount && compareDates(toDate, nowDate) === false && compareDates(fromDate, nowDate) === true) {\r\n                            arrTemp[i] = arrData.data[i]\r\n\r\n                        }\r\n                    }\r\n                    setdataVoucher(arrTemp)\r\n                    setCount(Math.ceil(arrData.count / PAGINATION.pagerow))\r\n                }\r\n            }\r\n            fetchData()\r\n        }\r\n\r\n    }, [props.id])\r\n\r\n   \r\n \r\n    return (\r\n\r\n        <div className=\"container rounded bg-white mt-5 mb-5\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-12 border-right border-left\">\r\n                    <div className=\"box-heading\">\r\n                        <div className=\"content-left\">\r\n                            <span>VÃ­ voucher</span>\r\n                        </div>\r\n                     \r\n                    </div>\r\n                 \r\n                    <div className=\"container-voucher\">\r\n                        {dataVoucher && dataVoucher.length > 0 &&\r\n                            dataVoucher.map((item, index) => {\r\n                                let percent = \"\"\r\n                                if (item.voucherData.typeVoucherOfVoucherData.typeVoucher === \"percent\") {\r\n                                    percent = item.voucherData.typeVoucherOfVoucherData.value + \"%\"\r\n                                }\r\n                                if (item.voucherData.typeVoucherOfVoucherData.typeVoucher === \"money\") {\r\n                                    percent = CommonUtils.formatter.format(item.voucherData.typeVoucherOfVoucherData.value)\r\n\r\n                                }\r\n                                let MaxValue = CommonUtils.formatter.format(item.voucherData.typeVoucherOfVoucherData.maxValue)\r\n\r\n                                return (\r\n                                    <VoucherItemSmall id={item.id} key={index} name={item.voucherData.codeVoucher} widthPercent={item.voucherData.usedAmount * 100 / item.voucherData.amount} maxValue={MaxValue} usedAmount={Math.round((item.voucherData.usedAmount * 100 / item.voucherData.amount) * 10) / 10} typeVoucher={percent} />\r\n                                )\r\n                            })\r\n                        }\r\n\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default StoreVoucher;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}